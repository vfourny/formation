---
title: Store Pinia
description: Comprendre l'utilitÃ© d'un Store dans Vue 3 et comment l'utiliser efficacement avec Pinia
icon: i-mdi-fruit-pineapple
---
## Store

Dans une application Vue, la gestion de l'Ã©tat peut rapidement devenir complexe, surtout lorsque plusieurs composants ont besoin d'accÃ©der aux mÃªmes donnÃ©es.

### ProblÃ¨me courant sans store

Prenons l'exemple d'une application de panier d'achat :

1. Un composant **Produit.vue** affiche une liste de produits.
2. Un composant **Panier.vue** affiche les articles ajoutÃ©s au panier.
3. Lorsque l'on clique sur "Ajouter au panier" dans **Produit.vue**, l'Ã©tat du panier doit Ãªtre mis Ã  jour et affichÃ© dans **Panier.vue**.

Sans Store, on doit passer l'Ã©tat du panier via des **props** et des **Ã©vÃ©nements** Ã  travers plusieurs niveaux de composants, ce qui devient rapidement ingÃ©rable.

## CrÃ©ation d'un Store avec Pinia

Pinia est une solution simple et efficace pour gÃ©rer l'Ã©tat global dans Vue 3.

### Installation de Pinia

```sh
npm install pinia
```

Puis, ajoute Pinia Ã  ton application Vue dans `main.js` :

```js
import { createApp } from 'vue';
import { createPinia } from 'pinia';
import App from './App.vue';

const app = createApp(App);
app.use(createPinia());
app.mount('#app');
```

---

### DÃ©finition d'un Store

CrÃ©ons un **store pour gÃ©rer le panier** :

```js
// stores/panier.js
import { defineStore } from 'pinia';

export const usePanierStore = defineStore('panier', {
  state: () => ({
    articles: []
  }),
  actions: {
    ajouterArticle(article) {
      this.articles.push(article);
    },
    supprimerArticle(index) {
      this.articles.splice(index, 1);
    }
  },
  getters: {
    totalArticles: (state) => state.articles.length
  }
});
```

### Utilisation du Store dans les composants

#### ðŸ“Œ Ajouter un article dans **Produit.vue**

```vue
<template>
  <div>
    <h2>{{ produit.nom }}</h2>
    <button @click="ajouterAuPanier">Ajouter au panier</button>
  </div>
</template>

<script>
import { usePanierStore } from '../stores/panier';

export default {
  props: ['produit'],
  setup() {
    const panierStore = usePanierStore();

    function ajouterAuPanier() {
      panierStore.ajouterArticle({ nom: 'Produit 1', prix: 10 });
    }

    return { ajouterAuPanier };
  }
};
</script>
```

####  Afficher les articles dans **Panier.vue**

```vue
<template>
  <div>
    <h2>Panier</h2>
    <ul>
      <li v-for="(article, index) in panierStore.articles" :key="index">
        {{ article.nom }} - {{ article.prix }}â‚¬
        <button @click="supprimer(index)">X</button>
      </li>
    </ul>
    <p>Total articles : {{ panierStore.totalArticles }}</p>
  </div>
</template>

<script>
import { usePanierStore } from '../stores/panier';

export default {
  setup() {
    const panierStore = usePanierStore();

    function supprimer(index) {
      panierStore.supprimerArticle(index);
    }

    return { panierStore, supprimer };
  }
};
</script>
```
