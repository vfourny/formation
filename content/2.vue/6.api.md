---
title: Appel API
description: Apprendre √† utiliser une API externe pour alimenter le store et les composants dans Vue 3
icon: i-mdi-api
---

## D√©couvrez comment int√©grer une API externe dans votre application Vue 3 pour alimenter le store (Pinia) et vos composants.

# Pourquoi utiliser une API externe ?

Les API externes permettent de **r√©cup√©rer des donn√©es** depuis des serveurs distants pour les utiliser dans votre application. Ces donn√©es peuvent alimenter des **composants Vue** et √™tre stock√©es dans votre **store** pour une gestion centralis√©e.

### üìå Probl√®me courant sans API

Sans API externe, vous seriez limit√© aux donn√©es locales et ne pourriez pas r√©cup√©rer des informations en temps r√©el √† partir de sources externes, comme des bases de donn√©es ou des services tiers.

**Solution** : Utiliser une API externe pour enrichir votre application avec des donn√©es dynamiques !

---

# Installation des d√©pendances

Pour interagir avec l'API, nous allons utiliser **Axios** (un client HTTP) et **Pinia** (pour g√©rer l'√©tat de l'application).

Installez Axios et Pinia :

```sh
npm install axios pinia
```

Puis, cr√©ez et configurez Pinia dans `main.js` :

```js
import { createApp } from 'vue';
import { createPinia } from 'pinia';
import App from './App.vue';
import axios from 'axios';

const app = createApp(App);

app.use(createPinia());
app.mount('#app');
```

# Utilisation des donn√©es dans les composants

Maintenant que le store est pr√™t, nous pouvons utiliser les donn√©es dans nos composants Vue.

### üìå Exemple de composant `DataDisplay.vue`

```vue
<template>
  <div>
    <h1>Donn√©es de l'API</h1>
    <button @click="fetchData">Charger les donn√©es</button>

    <div v-if="loading">Chargement...</div>
    <div v-if="error" class="error">Erreur : {{ error.message }}</div>

    <ul>
      <li v-for="item in data" :key="item.id">{{ item.name }}</li>
    </ul>
  </div>
</template>

<script>
import { useApiStore } from '../stores/useApiStore';

export default {
  setup() {
    const apiStore = useApiStore();

    return {
      data: apiStore.data,
      loading: apiStore.loading,
      error: apiStore.error,
      fetchData: apiStore.fetchData
    };
  }
};
</script>
```

### Explication

1. On r√©cup√®re les donn√©es via l'action `fetchData` du store.
2. L'√©tat `loading` est utilis√© pour afficher un message de chargement pendant la r√©cup√©ration des donn√©es.
3. Si une erreur se produit, l'√©tat `error` nous permet de l'afficher.
4. Une fois les donn√©es charg√©es, elles sont affich√©es dans une liste.
