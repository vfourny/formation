---
title: Alimentation du store et des composants avec une API externe
description: Apprendre à utiliser une API externe pour alimenter le store et les composants dans Vue 3
icon: i-mdi-api
---

# Introduction

## Découvrez comment intégrer une API externe dans votre application Vue 3 pour alimenter le store (Pinia) et vos composants.

## 📌 Liens utiles

- [Documentation Vue 3](https://vuejs.org/)
- [Pinia Documentation](https://pinia.vuejs.org/)
- [Axios Documentation](https://axios-http.com/)

## 📌 Exercices

- [Exemple d'application avec API externe](https://github.com/Seyrinian/vue3-api-example)
- [Exemple de projet Vue avec Pinia et Axios](https://github.com/Seyrinian/vue3-pinia-axios)

---

# Pourquoi utiliser une API externe ?

Les API externes permettent de **récupérer des données** depuis des serveurs distants pour les utiliser dans votre application. Ces données peuvent alimenter des **composants Vue** et être stockées dans votre **store** pour une gestion centralisée.

### 📌 Problème courant sans API

Sans API externe, vous seriez limité aux données locales et ne pourriez pas récupérer des informations en temps réel à partir de sources externes, comme des bases de données ou des services tiers.

**Solution** : Utiliser une API externe pour enrichir votre application avec des données dynamiques !

---

# Installation des dépendances

Pour interagir avec l'API, nous allons utiliser **Axios** (un client HTTP) et **Pinia** (pour gérer l'état de l'application).

Installez Axios et Pinia :

```sh
npm install axios pinia
```

Puis, créez et configurez Pinia dans `main.js` :

```js
import { createApp } from 'vue';
import { createPinia } from 'pinia';
import App from './App.vue';
import axios from 'axios';

const app = createApp(App);

app.use(createPinia());
app.mount('#app');
```

---

# Création d'un Store avec Pinia

Le store va nous permettre de centraliser les données récupérées depuis l'API et de les rendre accessibles dans tous les composants.

### 📌 Création du store API

Dans `src/stores/`, créez un fichier `useApiStore.js` :

```js
import { defineStore } from 'pinia';
import axios from 'axios';

export const useApiStore = defineStore('api', {
  state: () => ({
    data: [],
    loading: false,
    error: null
  }),
  actions: {
    async fetchData() {
      this.loading = true;
      try {
        const response = await axios.get('https://api.example.com/data');
        this.data = response.data;
      } catch (error) {
        this.error = error;
      } finally {
        this.loading = false;
      }
    }
  }
});
```

---

# Utilisation des données dans les composants

Maintenant que le store est prêt, nous pouvons utiliser les données dans nos composants Vue.

### 📌 Exemple de composant `DataDisplay.vue`

```vue
<template>
  <div>
    <h1>Données de l'API</h1>
    <button @click="fetchData">Charger les données</button>

    <div v-if="loading">Chargement...</div>
    <div v-if="error" class="error">Erreur : {{ error.message }}</div>

    <ul>
      <li v-for="item in data" :key="item.id">{{ item.name }}</li>
    </ul>
  </div>
</template>

<script>
import { useApiStore } from '../stores/useApiStore';

export default {
  setup() {
    const apiStore = useApiStore();

    return {
      data: apiStore.data,
      loading: apiStore.loading,
      error: apiStore.error,
      fetchData: apiStore.fetchData
    };
  }
};
</script>
```

### Explication

1. On récupère les données via l'action `fetchData` du store.
2. L'état `loading` est utilisé pour afficher un message de chargement pendant la récupération des données.
3. Si une erreur se produit, l'état `error` nous permet de l'afficher.
4. Une fois les données chargées, elles sont affichées dans une liste.

---

# Avantages de l'utilisation d'une API externe

✅ **Données dynamiques** : Vous pouvez récupérer des données en temps réel depuis une API.
✅ **Séparation des préoccupations** : Le store gère l'état de l'application, tandis que les composants se concentrent sur l'affichage.
✅ **Partage de données** : Les données du store sont accessibles dans tous les composants qui en ont besoin.

---

# Prochaines étapes

Dans le prochain chapitre, nous verrons :

1. **Gestion des erreurs et des états d'erreur dans Vue** 🚨
2. **Optimisation des appels API avec des caches** 💾
3. **Authentification et autorisation avec des APIs sécurisées** 🔐

🎉 **Prochain chapitre : Gestion avancée des API dans Vue 3 !**
