---
title: Alimentation du store et des composants avec une API externe
description: Apprendre Ã  utiliser une API externe pour alimenter le store et les composants dans Vue 3
icon: i-mdi-api
---

# Introduction

## DÃ©couvrez comment intÃ©grer une API externe dans votre application Vue 3 pour alimenter le store (Pinia) et vos composants.

## ğŸ“Œ Liens utiles

- [Documentation Vue 3](https://vuejs.org/)
- [Pinia Documentation](https://pinia.vuejs.org/)
- [Axios Documentation](https://axios-http.com/)

## ğŸ“Œ Exercices

- [Exemple d'application avec API externe](https://github.com/Seyrinian/vue3-api-example)
- [Exemple de projet Vue avec Pinia et Axios](https://github.com/Seyrinian/vue3-pinia-axios)

---

# Pourquoi utiliser une API externe ?

Les API externes permettent de **rÃ©cupÃ©rer des donnÃ©es** depuis des serveurs distants pour les utiliser dans votre application. Ces donnÃ©es peuvent alimenter des **composants Vue** et Ãªtre stockÃ©es dans votre **store** pour une gestion centralisÃ©e.

### ğŸ“Œ ProblÃ¨me courant sans API

Sans API externe, vous seriez limitÃ© aux donnÃ©es locales et ne pourriez pas rÃ©cupÃ©rer des informations en temps rÃ©el Ã  partir de sources externes, comme des bases de donnÃ©es ou des services tiers.

**Solution** : Utiliser une API externe pour enrichir votre application avec des donnÃ©es dynamiques !

---

# Installation des dÃ©pendances

Pour interagir avec l'API, nous allons utiliser **Axios** (un client HTTP) et **Pinia** (pour gÃ©rer l'Ã©tat de l'application).

Installez Axios et Pinia :

```sh
npm install axios pinia
```

Puis, crÃ©ez et configurez Pinia dans `main.js` :

```js
import { createApp } from 'vue';
import { createPinia } from 'pinia';
import App from './App.vue';
import axios from 'axios';

const app = createApp(App);

app.use(createPinia());
app.mount('#app');
```

---

# CrÃ©ation d'un Store avec Pinia

Le store va nous permettre de centraliser les donnÃ©es rÃ©cupÃ©rÃ©es depuis l'API et de les rendre accessibles dans tous les composants.

### ğŸ“Œ CrÃ©ation du store API

Dans `src/stores/`, crÃ©ez un fichier `useApiStore.js` :

```js
import { defineStore } from 'pinia';
import axios from 'axios';

export const useApiStore = defineStore('api', {
  state: () => ({
    data: [],
    loading: false,
    error: null
  }),
  actions: {
    async fetchData() {
      this.loading = true;
      try {
        const response = await axios.get('https://api.example.com/data');
        this.data = response.data;
      } catch (error) {
        this.error = error;
      } finally {
        this.loading = false;
      }
    }
  }
});
```

---

# Utilisation des donnÃ©es dans les composants

Maintenant que le store est prÃªt, nous pouvons utiliser les donnÃ©es dans nos composants Vue.

### ğŸ“Œ Exemple de composant `DataDisplay.vue`

```vue
<template>
  <div>
    <h1>DonnÃ©es de l'API</h1>
    <button @click="fetchData">Charger les donnÃ©es</button>

    <div v-if="loading">Chargement...</div>
    <div v-if="error" class="error">Erreur : {{ error.message }}</div>

    <ul>
      <li v-for="item in data" :key="item.id">{{ item.name }}</li>
    </ul>
  </div>
</template>

<script>
import { useApiStore } from '../stores/useApiStore';

export default {
  setup() {
    const apiStore = useApiStore();

    return {
      data: apiStore.data,
      loading: apiStore.loading,
      error: apiStore.error,
      fetchData: apiStore.fetchData
    };
  }
};
</script>
```

### Explication

1. On rÃ©cupÃ¨re les donnÃ©es via l'action `fetchData` du store.
2. L'Ã©tat `loading` est utilisÃ© pour afficher un message de chargement pendant la rÃ©cupÃ©ration des donnÃ©es.
3. Si une erreur se produit, l'Ã©tat `error` nous permet de l'afficher.
4. Une fois les donnÃ©es chargÃ©es, elles sont affichÃ©es dans une liste.

---

# Avantages de l'utilisation d'une API externe

âœ… **DonnÃ©es dynamiques** : Vous pouvez rÃ©cupÃ©rer des donnÃ©es en temps rÃ©el depuis une API.
âœ… **SÃ©paration des prÃ©occupations** : Le store gÃ¨re l'Ã©tat de l'application, tandis que les composants se concentrent sur l'affichage.
âœ… **Partage de donnÃ©es** : Les donnÃ©es du store sont accessibles dans tous les composants qui en ont besoin.

---

# Prochaines Ã©tapes

Dans le prochain chapitre, nous verrons :

1. **Gestion des erreurs et des Ã©tats d'erreur dans Vue** ğŸš¨
2. **Optimisation des appels API avec des caches** ğŸ’¾
3. **Authentification et autorisation avec des APIs sÃ©curisÃ©es** ğŸ”

ğŸ‰ **Prochain chapitre : Gestion avancÃ©e des API dans Vue 3 !**
